<div class="container">

    <h4>Controle de Funcionários</h4>
    <hr>
    <a href="/admin/dashboard" class="btn blue-grey darken-4 top-22- bottom-50"><i class="fas fa-angle-left"></i> Voltar</a>
    <a href="/admin/user/cadastro" class="btn top-22- bottom-50 right admin"><i class="fas fa-plus"></i></a>


    <div class="row">
        <div class="col s12 m8 push-m2">
            
            <ul class="collection">
                <small class="primary-text">{{admins_count}} Administrador(es)</small>
                {{#each admins}}
                    <li class="collection-item avatar">
                        <div class="col s11">
                            <img src="/img/users/{{foto}}" alt="Foto de {{nome}}" class="circle">
                            <span class="title">{{nome}} <small class="{{mode}}">{{mode}}</small></span>
                            <p>
                                <a href="#modal-admin-{{_id}}" class="modal-trigger {{status}} truncate">{{ident}}</a>
                                <br>
                            </p>
                        </div>
                    </li>
                    <div class="col s10 m6 l4">
                        <div id="modal-admin-{{_id}}" class="modal no-shadow">
                            <div class="modal-content">
                                
                                <div class="col s12 m6 l5 push-m3 push-l4">
                                    <div class="card card-user black-text sticky-action">
                                        <div class="card-image">
                                            <img src="/img/users/{{foto}}" alt="Foto de {{nome}}" class="responsive-img activator">
                                        </div>
                                    
                                        <div class="card-content white">
                                            <span class="card-title">{{nome}}</span>
                                            <a href="#modal-user-{{_id}}" class="modal-trigger {{status}} truncate">{{ident}}</a>
                                            <br>
                                            <small class="{{mode}}">{{mode}}</small>
                                            <br><br>
                                            <small>{{date}}</small>
                                        </div>
                                        <div class="card-action">
                                            <a class="btn-flat modal-close w-100 center">
                                                Fechar
                                            </a>
                                        </div>
                                        <div class="card-reveal blur-50">
                                            <span class="card-title"><i class="fas fa-plus r-45 right"></i></span>
                                            <div class="card-action top-50">
                                                <a href="#modal-xadmin-{{_id}}" class="modal-trigger btn grey w-100">
                                                    Remover
                                                </a>
                                                <label class="grey-text text-darken-3">Isto Remove os Privilégios de Administrador</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="modal-xadmin-{{_id}}" class="modal black-text">
                            <div class="modal-content">
                                <h4>Confirmar Ação</h4>
                                <p>
                                    Esta ação irá Remover os Privilégios de Administrador do(a) <span class="primary-text">{{nome}}</span>
                                    <br><br>
                                    Os Privilégios de Administrador incluem:
                                    <blockquote>
                                        · Cadastrar Itens <br>
                                        · Editar Itens <br>
                                        · Deletar Itens <br>
                                        · Adicionar Administrador <br>
                                        · Remover Administrador
                                    </blockquote>
                                </p>
                            </div>
                            <div class="modal-footer">
                                <form action="/admin/delete/admin/{{ident}}" method="post">
                                <input type="hidden" name="nome" value="{{nome}}">
                                    <button class="btn-flat left" type="submit">Confirmar</button>
                                    <a class="btn modal-close waves-effect">Cancelar</a>
                                </form>
                            </div>
                        </div>
                    </div>
                {{/each}}

                {{#if users}}
                    <hr>
                    <small class="primary-text">{{users_count}} Funcionário(s) | {{users_online_count}} online(s)</small>
                {{/if}}
                {{#each users}}

                    <li class="collection-item avatar">
                        <div class="col s10">
                            <img src="/img/users/{{foto}}" alt="Foto de {{nome}}" class="circle">
                            <span class="title">{{nome}} </span>
                            <p>
                                <a href="#modal-user-{{_id}}" class="modal-trigger {{status}} truncate">{{ident}}</a>
                            </p>
                        </div>
                        <div class="col s2">
                            <form action="/admin/bloquear/{{ident}}" method="post">
                                <button class="btn red" type="submit" style="margin-top: 10px;">
                                    <i class="fas fa-lock"></i>
                                </button>
                            </form>
                        </div>
                    </li>

                    <div class="col s10 m6 l4">
                        <div id="modal-user-{{_id}}" class="modal no-shadow">
                            <div class="modal-content">
                                <div class="col s10 m6 push-m2">
                                    <div class="card card-user black-text sticky-action">
                                        <div class="card-image">
                                            <img src="/img/users/{{foto}}" alt="Foto de {{nome}}" class="responsive-img activator">
                                        </div>
                                    
                                        <div class="card-content white">
                                            <span class="card-title">{{nome}}</span>
                                            <span class="truncate {{status}}">{{ident}}</span>
                                            <br>
                                            <small class="{{mode}}">{{mode}}</small>
                                            <br><br>
                                            <small>{{morada}}</small> <br>
                                            <small>{{date}}</small>
                                        </div>
                                        <div class="card-action">
                                            <a class="btn-flat modal-close w-100 center">
                                                Fechar
                                            </a>
                                        </div>
                                        <div class="card-reveal blur-50">
                                            <span class="card-title"><i class="fas fa-plus r-45 right"></i></span>
                                            <div class="card-action top-50">
                                                <a href="#modal-confirm-{{_id}}" class="btn modal-trigger red w-100">
                                                    Banir
                                                </a>
                                                <label class="grey-text text-darken-3">Isto Deleta o Funcionário da Base de Dados. (Irreversível)</label>
                                                <br><br>
                                                <a href="#modal-confirm-addAdmin-{{ident}}" class="btn w-100 admin modal-trigger waves-effect">
                                                    Admin
                                                </a>  
                                                <label class="grey-text text-darken-3">Isto Adiciona os Privilégios de Administrador a este Funcionário</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="modal-confirm-addAdmin-{{ident}}" class="modal no-shadow black-text">
                            <div class="modal-content">
                                <div class="col s12 m6 push-m2">
                                    <div class="card">
                                        <div class="card-content white">
                                            <span class="card-title">
                                                <p>Confirmar Ação!</p>
                                                <a class="modal-close right black-text"></a>
                                            </span>
                                            <small>
                                                Está ação concede Privilégios de Administrador o(a) Funcionário(a) <span class="primary-text">{{nome}}</span>
                                                <br><br>
                                                Os Privilégios de Administrador incluem:
                                                <blockquote>
                                                    · Cadastrar Itens <br>
                                                    · Editar Itens <br>
                                                    · Deletar Itens <br>
                                                    · Adicionar Administrador <br>
                                                    · Remover Administrador
                                                </blockquote>
                                            </small>
                                        </div>
                                        <div class="card-action white">
                                            <form action="/admin/cadastro/admin/{{ident}}" method="post">
                                                <input type="hidden" name="nome" value="{{nome}}">
                                                <button type="submit" class="btn-flat">Sim</button>
                                                <a class="btn modal-close right primary">Cancelar</a>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="modal-confirm-{{_id}}" class="modal no-shadow black-text">
                            <div class="modal-content">
                                <div class="col s12 m6 push-m2">
                                    <div class="card">
                                        <div class="card-content white">
                                            <span class="card-title">
                                                <p>Confirmar Ação!</p>
                                                <a class="modal-close right black-text"></a>
                                            </span>
                                            <small>Está ação irá Deletar o(a) Funcionário(a) <span class="primary-text">{{nome}}</span></small>
                                        </div>
                                        <div class="card-action white">
                                            <form action="/admin/user/delete/{{ident}}" method="post">
                                                <input type="hidden" name="nome" value="{{nome}}">
                                                <button type="submit" class="btn-flat">Sim</button>
                                                <a class="btn modal-close right primary">Cancelar</a>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                   
                {{/each}}

                {{#if users_reserva}}
                    <hr>
                    <small class="primary-text">Funcionário(s) sem Acesso</small>

                {{/if}}
                {{#each users_reserva}}

                    <li class="collection-item avatar">
                        <div class="col s10" style="opacity: .4;">
                            <img src="/img/users/{{foto}}" alt="Foto de {{nome}}" class="circle">
                            <span class="title">{{nome}} </span>
                            <p>
                                <a class="truncate">{{ident}}</a>
                            </p>
                        </div>
                        <div class="col s2">
                            <form action="/admin/desbloquear/{{ident}}" method="post">
                                <button class="btn primary" type="submit" style="margin-top: 10px;">
                                    <i class="fas fa-lock-open"></i>
                                </button>
                            </form>
                        </div>
                    </li>
                {{/each}}
            </ul>
        </div>
    </div>
</div>